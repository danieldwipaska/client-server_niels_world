<div class="container-md my-5 py-5 px-4">
  <div class="col-md-8 mx-auto p-5 box-part">
    <h1><%= post.title %></h1>
    <p class="text-muted date-here"></p>
    <p class="text-muted"><small> <%= post.desc %></small></p>
    <div>
      <a href="https://www.facebook.com/danieldwipaska" class="fa fa-facebook mb-1" target="_blank"></a>
      <a href="https://twitter.com/danieldwipaska" class="fa fa-twitter mb-1" target="_blank"></a>
      <a href="https://www.instagram.com/danieldwipaska/" class="fa fa-instagram mb-1" target="_blank"></a>
      <a href="https://www.youtube.com/channel/UCtIhpJe7f28PXyF-a0ktGBQ" class="fa fa-youtube mb-1" target="_blank"></a>
      <a href="https://mail.google.com/mail/?view=cm&to=scientificallychristian@gmail.com&su=SUBJECT&body=BODY&bcc=nielscience@gmail.com" class="fa fa-google mb-1" target="_blank"></a>
      <a href="https://www.linkedin.com/in/daniel-kamasi-2aa910157/" class="fa fa-linkedin mb-1" target="_blank"></a>
      <a href="https://join.skype.com/invite/xysXROeHBoxs" class="fa fa-skype mb-1" target="_blank"></a>
    </div>
    <%- post.sanitizeHtml %>
    <div>
      <a href="https://www.facebook.com/danieldwipaska" class="fa fa-facebook mb-1" target="_blank"></a>
      <a href="https://twitter.com/danieldwipaska" class="fa fa-twitter mb-1" target="_blank"></a>
      <a href="https://www.instagram.com/danieldwipaska/" class="fa fa-instagram mb-1" target="_blank"></a>
      <a href="https://www.youtube.com/channel/UCtIhpJe7f28PXyF-a0ktGBQ" class="fa fa-youtube mb-1" target="_blank"></a>
      <a href="https://mail.google.com/mail/?view=cm&to=scientificallychristian@gmail.com&su=SUBJECT&body=BODY&bcc=nielscience@gmail.com" class="fa fa-google mb-1" target="_blank"></a>
      <a href="https://www.linkedin.com/in/daniel-kamasi-2aa910157/" class="fa fa-linkedin mb-1" target="_blank"></a>
      <a href="https://join.skype.com/invite/xysXROeHBoxs" class="fa fa-skype mb-1" target="_blank"></a>
      </div>
  </div>
</div>
<div class="container-md my-2 px-4">
  <div class="row">
    <div class="col-md-8 mx-auto p-5 box-part">
      <h3 class="mb-3">Komentar:</h3>
      <% if(comments[0] === undefined) { %>
      <p class="text-muted">Belum ada komentar</p>
      <% } %> <% comments.forEach((e) => { %>
      <p class="mb-1"><strong><%= e.fullname %></strong></p>
      <p class="mb-2"><%= e.comment %></p>
      <% }); %>
    </div>
  </div>
  <div class="row mt-2">
    <div class="col-md-8 mx-auto p-5 box-part">
      <h3 class="mb-3">Tinggalkan Komentar Anda</h3>
      <form id="form" action="/api/comments" method="post">
        <div class="mb-3" style="display: none">
          <label for="postId" class="form-label">Post ID</label>
          <input type="text" class="form-control" name="postId" id="postId" placeholder="only post ID" value="<%= post._id  %>" />
        </div>
        <div class="mb-3" style="display: none">
          <label for="postSlug" class="form-label">Post Slug</label>
          <input type="text" class="form-control" name="postSlug" id="postSlug" placeholder="Slug" value="<%= post.slug %>" />
        </div>
        <div class="mb-3">
          <label for="fullname" class="form-label">Nama</label>
          <input type="text" class="form-control" name="fullname" placeholder="Maksimal 50 karakter" id="fullname"></input>
        </div>
        <div class="mb-3">
          <label for="comment" class="form-label">Komentar</label>
          <textarea class="form-control" name="comment" placeholder="Maksimal 500 karakter" id="comment"></textarea>
        </div>

        <button type="submit" class="btn btn-primary">Submit</button>
      </form>
    </div>
  </div>
</div>

<script>
  const date = new Date('<%= post.createdAt %>');
  const dateHere = document.querySelector('.date-here');
  dateHere.innerHTML = date.toLocaleDateString();

  const img = document.querySelectorAll('img');
  const imagePathString = '<%= post.imgPath %>';
  const imagePath = imagePathString.split(',');
  const newImgPath = [];
  for (let i = 0; i < imagePath.length; i++) {
    if (i % 2 === 0) {
      newImgPath.push(imagePath[i] + ',' + imagePath[i + 1]);
    }
  }

  let num = 0;
  img.forEach((e) => {
    e.setAttribute('src', newImgPath[num]);
    e.style.width = '100%';
    e.classList.add('centered-image');
    num++;
  });
</script>
